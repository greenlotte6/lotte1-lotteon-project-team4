<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gothic+A1&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Nanum+Gothic&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/common/_admin_header.css}">
    <link rel="stylesheet" th:href="@{/css/common/_admin_footer.css}">
    <link rel="stylesheet" th:href="@{/css/admin/config/basic.css}">
    <!-- js -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <title>기본 환경설정</title>
</head>
<script>
    document.addEventListener('DOMContentLoaded', function () {

        $('.hover').click(function (e) {
            $(this).parent().toggleClass('active');
        })

        document.getElementById('siteForm').addEventListener('submit', function (e) {
            e.preventDefault(); // 기본 폼 제출 막기

            const formData = new FormData(this);
            const data = {
                siteTitle: formData.get("siteTitle"),
                siteSubtitle: formData.get("siteSubtitle")
            };

            fetch('/admin/config/site', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(res => {
                if (res.ok) {
                    alert('수정되었습니다.');
                    location.reload(); // 새로고침해서 적용된 값 반영
                } else {
                    alert('수정에 실패했습니다.');
                }
            }).catch(err => {
                console.error(err);
                alert('서버 오류가 발생했습니다.');
            });
        });
    });
</script>
<body>
<th:block th:include="/common/_admin_header.html"/>
<main>
    <div class="main-wrapper">
        <th:block th:include="/common/_admin_aside"/>

        <div class="main">
            <div class="setting">
                <h1>기본설정</h1>
                <ul>
                    <li><a th:href="@{/admin/index}">HOME &nbsp;>&nbsp;</a></li>
                    <li><a th:href="@{/admin/config/basic}">환경설정 &nbsp;>&nbsp;</a></li>
                    <li><a th:href="@{/admin/config/basic}"><span>기본설정 &nbsp;</span></a></li>
                </ul>
            </div>
            <div class="line"></div>
            <div class="info">
                <div class="version">
                    <h2>버전 정보</h2>
                    <div class="version-text p-div">
                        <p>현재 사이트 버전입니다.</p>
                    </div>
                    <div class="version-view">
                        <table>
                            <tr>
                                <td>사이트 버전</td>
                                <td>[[${appInfo.appVersion}]]</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <form id="siteForm" method="post" th:action="@{/admin/config/site}" th:object="${siteConfig}">
                    <div class="site">
                        <h2>사이트</h2>
                        <div class="site-text p-div">
                            <p>브라우저 탭, 헤더 및 푸터 노출 정보입니다.</p>
                        </div>
                        <div class="site-view">
                            <table>
                                <tr>
                                    <td>제목</td>
                                    <td><input type="text" name="siteTitle" th:value="${siteConfig.siteTitle}"></td>
                                </tr>
                                <tr>
                                    <td>부제</td>
                                    <td><input type="text" name="siteSubtitle" th:value="${siteConfig.siteSubtitle}"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="modify">
                            <button type="submit">수정하기</button>
                        </div>
                    </div>
                </form>


                <div class="logo">
                    <h2>로고</h2>
                    <div class="logo-text p-div">
                        <p>브라우저 탭, 헤더 및 푸터 노출 로고입니다.</p>
                    </div>
                    <div class="logo-view">
                        <table>
                            <tr>
                                <td>헤더 로고</td>
                                <td><input type="file" name="header-logo">크기 370 * 76 권장</td>
                            </tr>
                            <tr>
                                <td>푸터 로고</td>
                                <td><input type="file" name="footer-logo">크기 155 * 36 권장</td>
                            </tr>
                            <tr>
                                <td>파비콘</td>
                                <td><input type="file" name="favicon">크기 32 * 32 권장</td>
                            </tr>
                        </table>
                    </div>
                    <div class="modify">
                        <button>수정하기</button>
                    </div>
                </div>

                <div class="company-info">
                    <h2>기업 정보</h2>
                    <div class="company-info-text p-div">
                        <p>푸터에 노출되는 기업 정보입니다.</p>
                    </div>
                    <div class="company-info-view">
                        <table>
                            <tr>
                                <td>상호명</td>
                                <td><input type="text" name="company-name" value="롯데쇼핑주식회사"></td>
                            </tr>
                            <tr>
                                <td>대표이사</td>
                                <td><input type="text" name="ceo" value="홍길동"></td>
                            </tr>
                            <tr>
                                <td>사업자등록번호</td>
                                <td><input type="text" name="company-number" value="123-12-12345"></td>
                            </tr>
                            <tr>
                                <td>통신판매업신고</td>
                                <td><input type="text" name="e-commerce-reg" value="2024-서울강남-1234"></td>
                            </tr>
                            <tr>
                                <td>기본주소</td>
                                <td><input type="text" name="addr1" value="서울특별시 강남구 테헤란로 507"></td>
                            </tr>
                            <tr>
                                <td>상세주소</td>
                                <td><input type="text" name="addr2" value="(삼성동, WeWork 빌딩) 7층"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="modify">
                        <button>수정하기</button>
                    </div>
                </div>

                <div class="support-info">
                    <h2>고객센터 정보</h2>
                    <div class="support-info-text p-div">
                        <p>푸터에 노출되는 고객센터 정보입니다.</p>
                    </div>
                    <div class="support-info-view">
                        <table>
                            <tr>
                                <td>전화번호</td>
                                <td><input type="text" name="call" value="02-1234-5678"></td>
                            </tr>
                            <tr>
                                <td>업무시간</td>
                                <td><input type="text" name="work-hour" value="평일 09:00 ~ 18:00"></td>
                            </tr>
                            <tr>
                                <td>이메일</td>
                                <td><input type="email" name="email" value="lotteon@lotte.net"></td>
                            </tr>
                            <tr>
                                <td>전자금융거래 분쟁담당</td>
                                <td><input type="text" name="dispute-officer" value="1234-1234"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="modify">
                        <button>수정하기</button>
                    </div>
                </div>

                <div class="copyright-info">
                    <h2>카피라이트</h2>
                    <div class="copyright-info-text p-div">
                        <p>푸터에 노출되는 카피라이트 정보입니다.</p>
                    </div>
                    <div class="copyright-info-view">
                        <table>
                            <tr>
                                <td>카피라이트</td>
                                <td><input type="text" name="copyright"
                                           value="Copyright © LOTTESHOPPING Co., LTD. All rights reserved"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="modify">
                        <button>수정하기</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<th:block th:include="/common/_admin_footer"/>
</body>
</html>